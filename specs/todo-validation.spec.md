# TODOバリデーション仕様

## 概要

TODO追加・編集時の入力値バリデーションに関する振る舞いを定義する。

## バリデーションルール

| ルール | 条件 | 処理 |
|--------|------|------|
| 空文字チェック | `title.trim() === ""` | 追加/更新を拒否、エラーメッセージを表示 |
| トリミング | `title !== title.trim()` | 前後の空白を自動除去してから保存 |
| 最大文字数 | `title.trim().length > 100` | 追加/更新を拒否、エラーメッセージを表示 |

## エラーメッセージ

| バリデーション | メッセージ |
|---------------|-----------|
| 空文字 | 「タイトルを入力してください」 |
| 100文字超過 | 「タイトルは100文字以内で入力してください」 |

## 振る舞い定義

### 追加時のバリデーション

| 条件 | 操作 | 期待結果 |
|------|------|---------|
| 入力欄が空 | Enterキーまたは追加ボタン | TODOは追加されず、エラーメッセージが表示される |
| 空白のみの入力 | Enterキーまたは追加ボタン | TODOは追加されず、空文字エラーが表示される |
| 101文字以上の入力 | Enterキーまたは追加ボタン | TODOは追加されず、文字数超過エラーが表示される |
| 前後に空白がある入力 | Enterキーまたは追加ボタン | 空白をトリミングした上でTODOが追加される |
| エラー表示中 | テキストを入力し始める | エラーメッセージが消える |

### 編集時のバリデーション

| 条件 | 操作 | 期待結果 |
|------|------|---------|
| 編集中に空文字にする | Enterキーまたはフォーカスアウト | 更新を拒否し、編集前のタイトルに戻す |
| 編集中に101文字以上にする | Enterキーまたはフォーカスアウト | 更新を拒否し、編集前のタイトルに戻す |
| 編集中に前後空白がある | Enterキーまたはフォーカスアウト | トリミングして更新する |

## バリデーション関数

```typescript
type ValidationResult =
  | { valid: true; sanitized: string }
  | { valid: false; error: string };

function validateTodoTitle(title: string): ValidationResult;
```
